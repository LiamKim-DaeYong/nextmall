# PRD (Product Requirements Document) - NextMall(e-commerce)

## ğŸ“„ Document Information
- Version: 1.0.0
- Created: 2025-10-26
- Author: Backend Developer (10ë…„ì°¨)
- Status: In Progress

---

## 1. Project Overview

### ğŸ¯ ëª©ì 
- ì‹¤ë¬´ì—ì„œ ê²½í—˜í•˜ì§€ ëª»í•œ í•µì‹¬ ê¸°ìˆ ì„ ì‹¤ì œ í”„ë¡œì íŠ¸ì— ë„ì…
- ëŒ€ê·œëª¨ íŠ¸ë˜í”½ ë° ë¶„ì‚° í™˜ê²½ ëŒ€ì‘ ëŠ¥ë ¥ ì‹¤ìŠµ
- ê¸°ìˆ  ë¸”ë¡œê·¸ ì‹œë¦¬ì¦ˆ í¬ìŠ¤íŒ…ê³¼ ë³‘í–‰í•˜ì—¬ í•™ìŠµ ê²°ê³¼ ê¸°ë¡
- í”„ë¡œì íŠ¸ë¥¼ í†µí•œ ìê¸° í™•ì‹  ë° ê¸°ìˆ ë ¥ íšŒë³µ

### âœ… ì„±ê³µ ê¸°ì¤€ (Success Criteria)
- [ ] Kafka, Redis, MongoDB, Docker, WebFlux, AWS ì‹¤ë¬´ ì ìš©
- [ ] íŠ¸ëœì­ì…˜, ìºì‹±, ë©”ì‹œì§•, ë¹„ë™ê¸° ì²˜ë¦¬ ë“± ì‹¤ë¬´ í•µì‹¬ íŒ¨í„´ í•™ìŠµ
- [ ] ëŒ€ê·œëª¨ íŠ¸ë˜í”½ ëŒ€ì‘ (ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ í¬í•¨)
- [ ] Event-Driven Architecture êµ¬ì„± ë° ì²˜ë¦¬ íë¦„ êµ¬ì„±
- [ ] AWS í™˜ê²½ì—ì„œ ë°°í¬/ìš´ì˜ ë° ëª¨ë‹ˆí„°ë§ ê²½í—˜ í™•ë³´
- [ ] Velogì— ê° Phaseë³„ ì‹¤ì „ í¬ìŠ¤íŒ… ë°œí–‰

---

## 2. Technical Stack

### âš™ï¸ í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ
```yaml
Backend: Spring Boot 3.2+, Java 21
Build: Gradle 8+ (Kotlin DSL, Multi-module)
Database:
  - PostgreSQL 15+ (User, Product, Order)
  - MongoDB 7+ (Review, Activity Log)
  - Redis 7+ (Session, Cache, Distributed Lock)
Message Queue: Apache Kafka 3+
Search: Elasticsearch 8+ (ì„ íƒì‚¬í•­)
Async: Spring WebFlux (Notification ì „ìš©)
Container: Docker + Docker Compose
Cloud: AWS (ECS, RDS, MSK, ElastiCache)
```

### ğŸ§ª ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
- ì„±ëŠ¥: í‰ê·  ì‘ë‹µ ì‹œê°„ < 200ms, TPS 1,000 ì´ìƒ
- ê°€ìš©ì„±: 99.9% SLA ìˆ˜ì¤€
- í™•ì¥ì„±: ìˆ˜í‰ í™•ì¥ ê¸°ë°˜ ì„¤ê³„
- ë³´ì•ˆ: OWASP Top 10 ëŒ€ì‘

## 3. System Architecture
### ğŸ§± ì•„í‚¤í…ì²˜ êµ¬ì„±
```scss
Client â†’ API Gateway
             â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     UserService  ProductService  OrderService
           â”‚               â”‚              â”‚
           â””â”€â”€â”€â”€â†’ Kafka Event Bus â†â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
          NotificationService (WebFlux)
                     â†“
                Infra (Redis, DB)

```

### ğŸ“¦ ëª¨ë“ˆ êµ¬ì¡°
```bash
/api                         â† API ì§„ì…ì  (Spring MVC)
/modules
  â”œâ”€ user                   â† ì¸ì¦, ì‚¬ìš©ì ê´€ë¦¬
  â”œâ”€ product                â† ìƒí’ˆ/ì¹´í…Œê³ ë¦¬
  â”œâ”€ order                  â† ì£¼ë¬¸, ì¬ê³ , ê²°ì œ
  â”œâ”€ review                 â† MongoDB ê¸°ë°˜ ë¦¬ë·°
  â”œâ”€ notification           â† ë¹„ë™ê¸° ì•Œë¦¼ (WebFlux)
  â”œâ”€ common                 â† ê³µí†µ DTO, Error, Config
/infrastructure              â† Kafka, Redis, DB ì„¤ì • ëª¨ë“ˆ
/docker                     â† docker-compose, init.sql ë“±
```

## 4. ê°œë°œ ë° í•™ìŠµ ì›Œí¬í”Œë¡œìš°
### Phase 1 (Week 1-2): í”„ë¡œì íŠ¸ ê¸°ë°˜ êµ¬ì¶• + Docker í•™ìŠµ
#### Step 1: í”„ë¡œì íŠ¸ ì„¸íŒ… + Docker í™˜ê²½ êµ¬ì„±
- [ ] Gradle ë©€í‹°ëª¨ë“ˆ í”„ë¡œì íŠ¸ ìƒì„±
- [ ] Docker Composeë¡œ PostgreSQL, Redis êµ¬ì„±
- [ ] ê¸°ë³¸ í—¬ìŠ¤ì²´í¬ API êµ¬í˜„

**ë¬¸ì œ ì¸ì‹**: í™˜ê²½ êµ¬ì„±ì˜ ë¶ˆì¼ì¹˜, DB ì´ˆê¸°í™” ë°˜ë³µ

Docker í•™ìŠµ ì „ëµ:
```yaml
ì‹¤ìŠµ ìœ„ì£¼ â†’ ë¬¸ì œ ë°œìƒ â†’ ì•„í‚¤í…ì²˜ í•™ìŠµ
  1. ì»¨í…Œì´ë„ˆë¡œ PostgreSQL, Redis ì‹¤í–‰
  2. Docker ë„¤íŠ¸ì›Œí¬ ì´í•´
  3. ê°œë°œìš© + ìš´ì˜ìš© ë¶„ë¦¬ ì „ëµ ê³ ë¯¼
```
**Velog í¬ìŠ¤íŒ…**: Docker ì…ë¬¸ - ê°œë°œí™˜ê²½ í†µì¼í•˜ê¸°

### Phase 2 (Week 3-4): ì¸ì¦ ì‹œìŠ¤í…œ + Redis í•™ìŠµ
#### Step 2: JWT ì¸ì¦ êµ¬í˜„
- [ ] íšŒì›ê°€ì…/ë¡œê·¸ì¸ API
- [ ] JWT í† í° ìƒì„± ë° í•„í„° ì ìš©
- [ ] ê¶Œí•œ ê¸°ë°˜ Role ë¶„ë¦¬ (BUYER, SELLER, ADMIN)

**ë¬¸ì œ ì¸ì‹**: ë¡œê·¸ì•„ì›ƒ/í† í° ë¬´íš¨í™”ì˜ ì–´ë ¤ì›€

#### Step 3: Redis + ì„¸ì…˜ ê´€ë¦¬
- [ ] Refresh Token Redis ì €ì¥
- [ ] ë¡œê·¸ì•„ì›ƒ ì‹œ ë¸”ë™ë¦¬ìŠ¤íŠ¸ ì²˜ë¦¬
- [ ] ì‚¬ìš©ì ì„¸ì…˜ ìºì‹±
- [ ] ë™ì‹œ ë¡œê·¸ì¸ ì œí•œ ê¸°ëŠ¥

Redis í•™ìŠµ ì „ëµ:
```yaml
  1. JWT í•œê³„ ë¶„ì„ â†’ ì„¸ì…˜ í•„ìš”ì„± ì¸ì‹
  2. Redis ë°ì´í„° íƒ€ì… í•™ìŠµ + TTL ì ìš©
  3. Redisson ê¸°ë°˜ ë¶„ì‚°ë½ í•™ìŠµ ë³‘í–‰
```
**Velog í¬ìŠ¤íŒ…**: Redis ì‹¤ë¬´ í™œìš© - ì„¸ì…˜ ê´€ë¦¬ì™€ ìºì‹± ì „ëµ

### Phase 3 (Week 5-6): ìƒí’ˆ ê´€ë¦¬ + MongoDB ë¦¬ë·°
#### Step 4: ìƒí’ˆ CRUD + RDB ì„±ëŠ¥ íŠœë‹
- [ ] ìƒí’ˆ/ì¹´í…Œê³ ë¦¬ CRUD
- [ ] ì¿¼ë¦¬ ì¸ë±ì‹± ë° ì‹¤í–‰ê³„íš ë¶„ì„
- [ ] í˜ì´ì§• + ì •ë ¬ ìµœì í™”

#### Step 5: ë¦¬ë·° ì‹œìŠ¤í…œ MongoDB ì „í™˜
- [ ] ë¦¬ë·° CRUD (ì‚¬ì§„, íƒœê·¸ í¬í•¨)
- [ ] í‰ì  ì§‘ê³„ API
- [ ] ìƒí’ˆë³„ ë¦¬ë·° ê²€ìƒ‰/í•„í„°ë§

MongoDB í•™ìŠµ ì „ëµ:
```yaml
    1. NoSQL ë„ì… íŒë‹¨ ê¸°ì¤€ í™•ë¦½
    2. Document ëª¨ë¸ ì„¤ê³„ ì „ëµ í•™ìŠµ
    3. MongoRepository vs Template ì‚¬ìš© ë¹„êµ
```

**Velog í¬ìŠ¤íŒ…**: NoSQLì€ ì–¸ì œ ì“°ëŠ”ê°€ - MongoDB ë¦¬ë·° ì„¤ê³„ê¸°

### Phase 4 (Week 7-8): ì£¼ë¬¸ ì‹œìŠ¤í…œ + Kafka ì´ë²¤íŠ¸ ê¸°ë°˜
#### Step 6: ì£¼ë¬¸ â†’ ê²°ì œ ë™ê¸° íë¦„ êµ¬í˜„
- [ ] ì¥ë°”êµ¬ë‹ˆ â†’ ì£¼ë¬¸ â†’ ê²°ì œ ì—°ë™
- [ ] ì¬ê³  ë¶„ì‚°ë½, ì‹¤íŒ¨ ì‹œ ë¡¤ë°±

#### Step 7: Kafka ì´ë²¤íŠ¸ ê¸°ë°˜ ì „í™˜
- [ ] Kafka ê¸°ë³¸ ë°œí–‰/ì†Œë¹„ êµ¬ì„±
- [ ] ì£¼ë¬¸-ê²°ì œ-ë°°ì†¡ ì‚¬ê°€ íŒ¨í„´ êµ¬í˜„
- [ ] ì´ë²¤íŠ¸ ë¦¬íŠ¸ë¼ì´ ë° ì‹¤íŒ¨ ì²˜ë¦¬ ì „ëµ ë„ì…

Kafka í•™ìŠµ ì „ëµ:
```yaml
    1. ì£¼ë¬¸ ì„±ê³µ í›„ ì´ë²¤íŠ¸ ë°œí–‰ â†’ ì•Œë¦¼ ì „ì†¡
    2. Kafka + Saga â†’ íŠ¸ëœì­ì…˜ ë³´ê°• ì‹¤ìŠµ
    3. Topic ì„¤ê³„ ë° ë©”ì‹œì§€ ì—­ì§ë ¬í™” ì „ëµ í•™ìŠµ
```

**Velog í¬ìŠ¤íŒ…**: Kafkaë¡œ ë§Œë“œëŠ” ì´ë²¤íŠ¸ ê¸°ë°˜ ì£¼ë¬¸ ì‹œìŠ¤í…œ

### Phase 5 (Week 9-10): WebFlux ì•Œë¦¼ + AWS ë°°í¬
#### Step 8: WebFlux ê¸°ë°˜ ì•Œë¦¼ ì„œë¹„ìŠ¤
- [ ] ì´ë©”ì¼/í‘¸ì‹œ ë°œì†¡ ë¹„ë™ê¸° ì²˜ë¦¬
- [ ] ì™¸ë¶€ API (SendGrid ë“±) ì—°ë™
- [ ] ì²˜ë¦¬ëŸ‰ ë¹„êµ ë¶„ì„

WebFlux í•™ìŠµ ì „ëµ:

```yaml
    1. Reactive ê°œë… í•™ìŠµ
    2. Controller ë‹¨ WebFlux ì „í™˜
    3. RestTemplate â†” WebClient ë¹„êµ
```

#### Step 9: AWS ë°°í¬ ë° ìš´ì˜ êµ¬ì„±
- [ ] Docker ì´ë¯¸ì§€ â†’ ECS ë°°í¬
- [ ] RDS + Redis + MSK êµ¬ì„±
- [ ] CloudWatch + Prometheus ëª¨ë‹ˆí„°ë§
- [ ] ë¹„ìš© ëª¨ë‹ˆí„°ë§ ë° ìµœì í™”

**Velog í¬ìŠ¤íŒ…**: AWS ECS ê¸°ë°˜ ë°±ì—”ë“œ ìš´ì˜ í™˜ê²½ êµ¬ì¶•ê¸°