# ADR-008: Orchestrator 분리

## 상태
채택됨 (Accepted)

## 배경
- BFF에서 주문 생성/회원가입과 같은 다중 서비스 흐름(오케스트레이션)이 함께 존재.
- BFF 책임 과다를 줄이고 확장/변경 분리 목적.

## 결정 방향
- BFF에서 오케스트레이션을 별도 서비스(`orchestrator-service`)로 분리한다.
- BFF는 UI 집계/요청 변환 중심, Orchestrator는 비즈니스 워크플로우(사가) 담당.
- 내부 통신은 Passport 토큰을 그대로 전달한다.

## 범위 (초기)
- 주문 생성 플로우
- 회원가입 플로우

## 책임 분리 기준
### BFF
- UI에 맞춘 데이터 집계/형식 변환
- 단순 조회/쓰기 요청의 게이트웨이 역할
- 비즈니스 오케스트레이션(사가) 로직 금지

### Orchestrator
- 다중 서비스 호출/보상 트랜잭션 포함 워크플로우
- API 계약은 내부 전용(클라이언트 직접 호출 금지)

## 라우팅/보안 기준
- 외부 요청은 Gateway → BFF를 기본 경로로 유지
- 워크플로우가 필요한 요청은 BFF가 Orchestrator로 위임
- Orchestrator는 Passport 토큰만 신뢰하며 외부 직접 노출하지 않음

## 구현 현황 (2026-01-24)
- `orchestrator-service` 모듈이 포함됨
- BFF→Orchestrator 위임 구조로 초기 적용

## 후속 작업
- 라우팅/보안 책임 재정의 및 문서 반영
